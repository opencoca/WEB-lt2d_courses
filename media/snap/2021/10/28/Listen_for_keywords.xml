<project name="Listen for keywords" app="Snap! 6, https://snap.berkeley.edu" version="1"><notes></notes><thumbnail>data:image/png;base64,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</thumbnail><stage name="Stage" width="480" height="360" costume="0" color="255,255,255,1" tempo="60" threadsafe="false" penlog="false" volume="100" pan="0" lines="round" ternary="false" hyperops="true" codify="false" inheritance="true" sublistIDs="false" scheduled="false" id="1"><pentrails>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAFoCAYAAACPNyggAAAAAXNSR0IArs4c6QAADoVJREFUeF7t1cEJAAAIxDDdf2m3sJ+4wEEQuuMIECBAgACBd4F9XzRIgAABAgQIjAB7AgIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECAiwHyBAgAABAoGAAAfoJgkQIECAgAD7AQIECBAgEAgIcIBukgABAgQICLAfIECAAAECgYAAB+gmCRAgQICAAPsBAgQIECAQCAhwgG6SAAECBAgIsB8gQIAAAQKBgAAH6CYJECBAgIAA+wECBAgQIBAICHCAbpIAAQIECByxcQFpoRMBzwAAAABJRU5ErkJggg==</pentrails><costumes><list struct="atomic" id="2"></list></costumes><sounds><list struct="atomic" id="3"></list></sounds><variables></variables><blocks></blocks><scripts></scripts><sprites><sprite name="Sprite" idx="1" x="0" y="0" heading="90" scale="1" volume="100" pan="0" rotation="1" draggable="true" costume="0" color="80,80,80,1" pen="tip" id="8"><costumes><list struct="atomic" id="9"></list></costumes><sounds><list struct="atomic" id="10"></list></sounds><blocks></blocks><variables></variables><scripts><script x="28.5" y="66.5"><block s="receiveKey"><l><option>space</option></l></block><custom-block s="Listen then %cmdRing but if error %cmdRing"><block s="reifyScript"><script><block s="doIf"><block s="reportListContainsItem"><block s="reportTextSplit"><block var="#1"/><l> </l></block><l>joke</l></block><script><custom-block s="Speak %txt"><l>Oh? A Joke? Sure! Why did the chicken cross the road?</l></custom-block><custom-block s="Listen then %cmdRing but if error %cmdRing"><block s="reifyScript"><script><block s="doIf"><block s="reportListContainsItem"><block s="reportTextSplit"><block var="#1"/><l> </l></block><l>why</l></block><script><custom-block s="Speak %txt"><l>To get to the other side.  </l></custom-block></script></block></script><list><l>#1</l></list></block><block s="reifyScript"><script></script><list></list></block></custom-block></script></block></script><list><l>#1</l></list></block><block s="reifyScript"><script></script><list></list></block><comment w="152" collapsed="false">Tell me a joke!&#xD;&#xD;1.) Press spacebar&#xD;2.) Say &quot;tell me a joke&quot;&#xD;4.) Wait for joke&#xD;3.) ask &quot;why?&quot;&#xD;5.) Recieve funny punchline! </comment></custom-block></script><script x="17" y="386"><custom-block s="Listen then %cmdRing but if error %cmdRing"><block s="reifyScript"><script><block s="doSetVar"><l>list of words</l><block s="reportTextSplit"><block var="#1"/><l> </l></block></block><block s="doFor"><l>i</l><l>1</l><block s="reportListLength"><block var="list of words"/></block><script><block s="doIf"><block s="reportEquals"><block s="reportListItem"><block var="i"/><block var="list of words"/></block><l>key</l></block><script><custom-block s="Speak %txt"><l>you said the key word!</l></custom-block></script></block></script></block></script><list><l>#1</l></list></block><block s="reifyScript"><script></script><list></list></block><comment w="90" collapsed="false">Example: splitting you spoken text into a list of words, then search the list for the keyword</comment></custom-block></script></scripts></sprite><watcher var="list of words" style="normal" x="10" y="10" color="243,118,29" extX="80" extY="70"/></sprites></stage><hidden></hidden><headers></headers><code></code><blocks><block-definition s="speak %&apos;text&apos; %&apos;what to do when finished&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%cmdRing"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>message</l><l>finished_callback</l></list><l>var utterance = new SpeechSynthesisUtterance(message);&#xD;&#xD;if (typeof finished_callback === &apos;object&apos;) {&#xD;&#xD;   // callback provided&#xD;&#xD;   utterance.onend = function (event) {&#xD;&#xD;       invoke(finished_callback, new List([message]));&#xD;&#xD;   };&#xD;&#xD;}&#xD;&#xD;if (window.speech_recognition) {&#xD;&#xD;   window.speech_recognition.abort();&#xD;&#xD;}&#xD;&#xD;window.speechSynthesis.speak(utterance);&#xD;&#xD;</l></block><list><block var="text"/><block var="what to do when finished"/></list></block></script></block-definition><block-definition s="listen and then %&apos;do with recognised words&apos; %&apos;do if nothing recognised&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>spoken_callback</l><l>error_callback</l></list><l>var restart = function () {&#xD;&#xD;    if (window.speechSynthesis.speaking) { // don&apos;t listen while speaking&#xD;&#xD;        // there remains the possibility of speech happening after recognition starts&#xD;&#xD;        setTimeout(restart, 500); // try again in half a second&#xD;&#xD;        return;&#xD;&#xD;    }&#xD;&#xD;    try {&#xD;&#xD;        window.speech_recognition.start();&#xD;&#xD;        console.log("recognition started");&#xD;&#xD;    } catch (error) {&#xD;&#xD;        if (error.name === &apos;InvalidStateError&apos;) {&#xD;&#xD;            // delay needed at least in Chrome 52&#xD;&#xD;            setTimeout(restart, 2000);&#xD;&#xD;        } else {&#xD;&#xD;            console.log(error);&#xD;&#xD;        }&#xD;&#xD;    }&#xD;&#xD;};&#xD;&#xD;var handle_result = function (callback, event) {&#xD;&#xD;    var spoken = event.results[0][0].transcript;&#xD;&#xD;    console.log("Confidence is " + event.results[0][0].confidence + " for " + spoken, spoken_callback);&#xD;&#xD;    window.speech_recognition.stop();&#xD;&#xD;    invoke(callback, new List([spoken]));&#xD;&#xD;};&#xD;&#xD;var handle_error = function (callback, event) {&#xD;&#xD;    if (event.error === &apos;aborted&apos;) {&#xD;&#xD;        console.log("aborted so restarting speech recognition in half a second");&#xD;&#xD;        setTimeout(restart, 500);&#xD;&#xD;        return;&#xD;&#xD;    }&#xD;&#xD;    if (event.error === &apos;no-speech&apos;) {&#xD;&#xD;        window.speech_recognition.onend = null;&#xD;&#xD;        window.speech_recognition.onresult = null;&#xD;&#xD;        window.speech_recognition.stop();&#xD;&#xD;    }&#xD;&#xD;    console.log("Recognition error: " + event.error);&#xD;&#xD;    if (typeof callback === &apos;object&apos;) {&#xD;&#xD;        invoke(callback, new List([event.error]));&#xD;&#xD;    }&#xD;&#xD;};&#xD;&#xD;if (!window.speech_recognition) {&#xD;&#xD;    window.speech_recognition = (typeof SpeechRecognition === &apos;undefined&apos;) ? &#xD;&#xD;        new webkitSpeechRecognition() :&#xD;&#xD;        new SpeechRecognition();&#xD;&#xD;}&#xD;&#xD;window.speech_recognition.onresult = function (event) {&#xD;&#xD;    handle_result(spoken_callback, event);&#xD;&#xD;};&#xD;&#xD;window.speech_recognition.onerror = function (event) {&#xD;&#xD;    handle_error(error_callback, event);&#xD;&#xD;};&#xD;&#xD;window.speech_recognition.onend = function (event) {&#xD;&#xD;    console.log("recognition ended");&#xD;&#xD;    restart(); &#xD;&#xD;};&#xD;&#xD;restart();&#xD;&#xD;</l></block><list><block var="do with recognised words"/><block var="do if nothing recognised"/></list></block></script></block-definition><block-definition s="listen for a number %&apos;what to do with the number&apos; %&apos;what to do if not a number&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="Listen then %cmdRing but if error %cmdRing"><block s="reifyScript"><script><block s="doIfElse"><block s="reportIsA"><block var="spoken"/><l><option>number</option></l></block><script><block s="doRun"><block var="what to do with the number"/><list><block var="spoken"/></list></block></script><script><block s="doRun"><block var="what to do if not a number"/><list><block var="spoken"/></list></block></script></block></script><list><l>spoken</l></list></block><block var="what to do if not a number"/></custom-block></script></block-definition><block-definition s="set language to %&apos;language&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>lang</l></list><l>if (window.speech_recognition) {&#xD;   window.speech_recognition.lang = lang;&#xD;}</l></block><list><block var="language"/></list></block></script></block-definition><block-definition s="run eCraft2Learn command %&apos;command name&apos; with %&apos;inputs&apos;" type="command" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    ecraft2learn.run(function_name, parameters);&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;} else {&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    var script = document.createElement("script");&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.type = "text/javascript";&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.src = "https://app.robotinacan.com/ai/ecraft2learn.js";&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    script.addEventListener(&apos;load&apos;, function () {&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;        ecraft2learn.run(function_name, parameters);&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    });&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    document.head.appendChild(script);&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;}</l></block><list><block var="command name"/><block var="inputs"/></list></block></script></block-definition><block-definition s="call eCraft2Learn reporter %&apos;reporter name&apos; with %&apos;inputs&apos;" type="reporter" category="other"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%mult%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>function_name</l><l>parameters</l></list><l>if (typeof ecraft2learn === &apos;object&apos;) {&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    return ecraft2learn.run(function_name, parameters);&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;} else {&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    alert("Any eCraft2Learn command must be run before the " + function_name + " reporter.");&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;    return 0;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;&#xD;}</l></block><list><block var="reporter name"/><block var="inputs"/></list></block></block></script></block-definition><block-definition s="speak %&apos;message&apos; then %&apos;what to do when finished&apos; with pitch %&apos;pitch&apos; with rate %&apos;rate&apos; with voice %&apos;voice&apos; with volume %&apos;volume&apos; in language %&apos;language code&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%cmdRing"></input><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%n"></input><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="message"/><block var="pitch"/><block var="rate"/><block var="voice"/><block var="volume"/><block var="language code"/><block var="what to do when finished"/></list></custom-block></script></block-definition><block-definition s="Get voice names" type="reporter" category="sound"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>get_voice_names</l><list></list></custom-block></block></script></block-definition><block-definition s="voice name of %&apos;voice number&apos;" type="reporter" category="sound"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doReport"><custom-block s="call eCraft2Learn reporter %txt with %mult%s"><l>get_voice_name</l><list><block var="voice number"/></list></custom-block></block></script></block-definition><block-definition s="Speak %&apos;message&apos; then %&apos;to do when finished speaking&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%txt"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="message"/><l></l><l></l><l></l><l></l><l></l><block var="to do when finished speaking"/></list></custom-block></script></block-definition><block-definition s="Stop speech recognition" type="command" category="sensing"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>stop_speech_recognition</l><list></list></custom-block></script></block-definition><block-definition s="Speak %&apos;message&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%txt"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>speak</l><list><block var="message"/><l></l><l></l><l></l><l></l><l></l><l></l></list></custom-block></script></block-definition><block-definition s="listen" type="command" category="sensing"><comment x="0" y="0" w="90" collapsed="false">When something is spoken this broadcasts &apos;heard something&apos; and sets &apos;last thing spoken&apos; to the text that was spoken.</comment><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="Listen then %cmdRing but if error %cmdRing"><block s="reifyScript"><script><block s="doSetVar"><l>last thing spoken</l><block var="spoken"/></block><block s="doBroadcast"><l>heard something</l></block><custom-block s="listen"></custom-block></script><list><l>spoken</l></list></block><block s="reifyScript"><script><block s="doSetVar"><l>speech recognition error</l><block var="error"/></block><block s="doBroadcast"><l>speech recognition error</l></block><block s="doIfElse"><block s="reportEquals"><block var="speech recognition error"/><l>no-speech</l></block><script><custom-block s="Speak %txt"><l>I didn&apos;t hear anything for a while. Bye. Click the green flag to start listening again..</l></custom-block><custom-block s="Stop speech recognition"></custom-block></script><script><custom-block s="Speak %txt"><block s="reportJoinWords"><list><l>There was an error. </l><block var="speech recognition error"/></list></block></custom-block><block s="bubble"><block s="reportJoinWords"><list><l>There was an error. </l><block var="speech recognition error"/></list></block></block><custom-block s="Speak %txt then %cmdRing"><l>Try again.</l><block s="reifyScript"><script><custom-block s="listen"></custom-block></script><list></list></block></custom-block></script></block></script><list><l>error</l></list></block></custom-block></script></block-definition><block-definition s="Listen then %&apos;handle response&apos; but if error %&apos;handle error&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%cmdRing"></input><input type="%cmdRing"></input></inputs><script><custom-block s="run eCraft2Learn command %txt with %mult%s"><l>start_speech_recognition</l><list><block var="handle response"/><block var="handle error"/></list></custom-block></script></block-definition><block-definition s="Microsoft speech key" type="reporter" category="other"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><l>Enter your key here</l></block></script></block-definition></blocks><variables><variable name="list of words"><list struct="atomic" id="345">why</list></variable></variables></project>